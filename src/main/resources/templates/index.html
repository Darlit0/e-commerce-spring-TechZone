<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>TechZone - Accueil</title>
</head>
<body>

    <div th:replace="~{navbar :: navbar}"></div>
    
    <h1>Boutique</h1>
    <div id="container-produits">Chargement...</div>

    <script>
        // Appel à votre API qui fonctionne "parfaitement"
        fetch('/api/produits/all')
            .then(res => res.json())
            .then(data => {
                const div = document.getElementById('container-produits');
                div.innerHTML = ""; // Vider le texte de chargement
                
                data.forEach(p => {
                    div.innerHTML += `
                        <div>
                            <h3>${p.nom}</h3>
                            <img src="${p.image}" alt="${p.nom}">
                            <p>Catégorie : ${p.categorie_id}</p>
                            <p>Prix : ${p.prix} €</p>
                            <p>Quantité : ${p.stock}</p>
                            <p>Statut : ${p.statut}</p>
                            <p>Description : ${p.description_courte}</p>
                        </div>
                        <hr/>
                    `;
                });
            });
    </script>
</body>
</html>